import{a as S}from"/build/_shared/chunk-YGEBXFN7.js";import{a as C}from"/build/_shared/chunk-CLA73AZB.js";import{a as u,b as E}from"/build/_shared/chunk-U2XHCC3L.js";import{b as p,c as w,e as d,o as F}from"/build/_shared/chunk-JBQFAOEL.js";import{c as b,e as N,h,k as v,q as D,t as L}from"/build/_shared/chunk-MNLU5CHS.js";import{a as T}from"/build/_shared/chunk-47ZWW2WL.js";import{c as m,d as A,e,f as l}from"/build/_shared/chunk-UIDRLFYU.js";l();l();var k=m(C()),q=m(T());var P=m(S());var c=m(A());function M(i){return i<=0?"Must be greater than 0":Number(i.toFixed(2))!==i?"Must only have two decimal places":null}function B(i){return Number.isNaN(i.getTime())?"Please enter a valid date":null}var g="flex justify-between border-t border-gray-100 py-4 text-[14px] leading-[24px]";function I(){let i=D(),o=b();return e.createElement("div",{className:"relative p-10",key:o.key},e.createElement(v,{to:`../../customers/${i.customerId}`,className:"text-[length:14px] font-bold leading-6 text-blue-600 underline"},i.customerName),e.createElement("div",{className:"text-[length:32px] font-bold leading-[40px]"},u.format(i.totalAmount)),e.createElement(d,null,e.createElement("span",{className:i.dueStatus==="paid"?"text-green-brand":i.dueStatus==="overdue"?"text-red-brand":""},i.dueDisplay),` \u2022 Invoiced ${i.invoiceDateDisplay}`),e.createElement("div",{className:"h-4"}),i.lineItems.map(s=>e.createElement($,{key:s.id,description:s.description,unitPrice:s.unitPrice,quantity:s.quantity})),e.createElement("div",{className:`${g} font-bold`},e.createElement("div",null,"Net Total"),e.createElement("div",null,u.format(i.totalAmount))),e.createElement("div",{className:"h-8"}),e.createElement(H,null))}function H(){var y;let i=D(),o=L(),s=(0,c.useRef)(null),f=[...i.deposits];if(o.submission){let n=Number(o.submission.formData.get("amount")),r=o.submission.formData.get("depositDate"),a=typeof r=="string"?E(r):null;!M(n)&&a&&!B(a)&&f.push({id:"new",amount:n,depositDateFormatted:a.toLocaleDateString()})}let t=(y=o.data)==null?void 0:y.errors;return(0,c.useEffect)(()=>{var r,a,x;if(!s.current||o.type!=="done")return;let n=s.current;(t==null?void 0:t.amount)?(r=n.elements.amount)==null||r.focus():(t==null?void 0:t.depositDate)?(a=n.elements.depositDate)==null||a.focus():document.activeElement===n.elements.intent&&(n.reset(),(x=n.elements.amount)==null||x.focus())},[o.type,t]),e.createElement("div",null,e.createElement("div",{className:"font-bold leading-8"},"Deposits"),f.length>0?f.map(n=>e.createElement("div",{key:n.id,className:g},e.createElement(v,{to:`../../deposits/${n.id}`,className:"text-blue-600 underline"},n.depositDateFormatted),e.createElement("div",null,u.format(n.amount)))):e.createElement("div",null,"None yet"),e.createElement(o.Form,{method:"post",className:"grid grid-cols-1 gap-x-4 gap-y-2 lg:grid-cols-2",ref:s,noValidate:!0},e.createElement("div",{className:"min-w-[100px]"},e.createElement("div",{className:"flex flex-wrap items-center gap-1"},e.createElement(d,null,e.createElement("label",{htmlFor:"depositAmount"},"Amount")),(t==null?void 0:t.amount)?e.createElement("em",{id:"amount-error",className:"text-d-p-xs text-red-600"},t.amount):null),e.createElement("input",{id:"depositAmount",name:"amount",type:"number",className:p,min:"0.01",step:"any",required:!0,"aria-invalid":Boolean(t==null?void 0:t.amount)||void 0,"aria-errormessage":(t==null?void 0:t.amount)?"amount-error":void 0})),e.createElement("div",null,e.createElement("div",{className:"flex flex-wrap items-center gap-1"},e.createElement(d,null,e.createElement("label",{htmlFor:"depositDate"},"Date")),(t==null?void 0:t.depositDate)?e.createElement("em",{id:"depositDate-error",className:"text-d-p-xs text-red-600"},t.depositDate):null),e.createElement("input",{id:"depositDate",name:"depositDate",type:"date",className:`${p} h-[34px]`,required:!0,"aria-invalid":Boolean(t==null?void 0:t.depositDate)||void 0,"aria-errormessage":(t==null?void 0:t.depositDate)?"depositDate-error":void 0})),e.createElement("div",{className:"grid grid-cols-1 gap-4 lg:col-span-2 lg:flex"},e.createElement("div",{className:"flex-1"},e.createElement(d,null,e.createElement("label",{htmlFor:"depositNote"},"Note")),e.createElement("input",{id:"depositNote",name:"note",type:"text",className:p})),e.createElement("div",{className:"flex items-end"},e.createElement("button",{type:"submit",className:w,name:"intent",value:"create-deposit"},"Create")))))}function $({description:i,quantity:o,unitPrice:s}){return e.createElement("div",{className:g},e.createElement("div",null,i),o===1?null:e.createElement("div",{className:"text-[10px]"},"(",o,"x)"),e.createElement("div",null,u.format(s)))}function j(){let i=h(),o=N();if(i.status===404)return e.createElement("div",{className:"p-12 text-red-500"},'No invoice found with the ID of "',o.invoiceId,'"');throw new Error(`Unexpected caught response with status: ${i.status}`)}function U({error:i}){return console.error(i),e.createElement(F,null)}export{j as CatchBoundary,U as ErrorBoundary,I as default};
