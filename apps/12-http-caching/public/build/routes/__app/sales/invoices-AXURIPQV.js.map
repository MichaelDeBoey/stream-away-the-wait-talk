{
  "version": 3,
  "sources": ["browser-route-module:/Users/kentcdodds/Desktop/stream-away-the-wait-talk/apps/12-http-caching/app/routes/__app/sales/invoices.tsx?browser", "../../../../../app/routes/__app/sales/invoices.tsx"],
  "sourcesContent": ["export { default } from \"/Users/kentcdodds/Desktop/stream-away-the-wait-talk/apps/12-http-caching/app/routes/__app/sales/invoices.tsx\";", "import { Outlet } from \"@remix-run/react\";\nimport { FilePlusIcon, LabelText } from \"~/components\";\n\nimport type { LoaderFunction } from \"@remix-run/node\";\nimport { json } from \"@remix-run/node\";\nimport { useLoaderData, NavLink } from \"@remix-run/react\";\nimport { getInvoiceListItems } from \"~/models/invoice.server\";\nimport { currencyFormatter } from \"~/utils\";\nimport { requireUser } from \"~/session.server\";\n\ntype LoaderData = {\n  invoiceListItems: Awaited<ReturnType<typeof getInvoiceListItems>>;\n  overdueAmount: number;\n  dueSoonAmount: number;\n};\n\nexport const loader: LoaderFunction = async ({ request }) => {\n  await requireUser(request);\n  const invoiceListItems = await getInvoiceListItems();\n  const dueSoonAmount = invoiceListItems.reduce((sum, li) => {\n    if (li.dueStatus !== \"due\") {\n      return sum;\n    }\n    const remainingBalance = li.totalAmount - li.totalDeposits;\n    return sum + remainingBalance;\n  }, 0);\n  const overdueAmount = invoiceListItems.reduce((sum, li) => {\n    if (li.dueStatus !== \"overdue\") {\n      return sum;\n    }\n    const remainingBalance = li.totalAmount - li.totalDeposits;\n    return sum + remainingBalance;\n  }, 0);\n  return json<LoaderData>({\n    invoiceListItems,\n    overdueAmount,\n    dueSoonAmount,\n  });\n};\n\nexport default function InvoicesRoute() {\n  const data = useLoaderData() as LoaderData;\n  const hundo = data.dueSoonAmount + data.overdueAmount;\n  const dueSoonPercent = Math.floor((data.dueSoonAmount / hundo) * 100);\n  return (\n    <div className=\"relative\">\n      <div className=\"flex items-center justify-between gap-4\">\n        <InvoicesInfo label=\"Overdue\" amount={data.overdueAmount} />\n        <div className=\"flex h-4 flex-1 overflow-hidden rounded-full\">\n          <div className=\"flex-1 bg-yellow-brand\" />\n          <div\n            className=\"bg-green-brand\"\n            style={{ width: `${dueSoonPercent}%` }}\n          />\n        </div>\n        <InvoicesInfo label=\"Due Soon\" amount={data.dueSoonAmount} right />\n      </div>\n      <div className=\"h-4\" />\n      <LabelText>Invoice List</LabelText>\n      <div className=\"h-2\" />\n      <InvoiceList>\n        <Outlet />\n      </InvoiceList>\n    </div>\n  );\n}\n\nfunction InvoicesInfo({\n  label,\n  amount,\n  right,\n}: {\n  label: string;\n  amount: number;\n  right?: boolean;\n}) {\n  return (\n    <div className={right ? \"text-right\" : \"\"}>\n      <LabelText>{label}</LabelText>\n      <div className=\"text-[length:18px] text-black\">\n        {currencyFormatter.format(amount)}\n      </div>\n    </div>\n  );\n}\n\nfunction InvoiceList({ children }: { children: React.ReactNode }) {\n  const { invoiceListItems } = useLoaderData() as LoaderData;\n  return (\n    <div className=\"flex overflow-hidden rounded-lg border border-gray-100\">\n      <div className=\"w-1/2 border-r border-gray-100\">\n        <NavLink\n          to=\"new\"\n          prefetch=\"intent\"\n          className={({ isActive }) =>\n            \"block border-b-4 border-gray-100 py-3 px-4 hover:bg-gray-50\" +\n            \" \" +\n            (isActive ? \"bg-gray-50\" : \"\")\n          }\n        >\n          <span className=\"flex gap-1\">\n            <FilePlusIcon /> <span>Create new invoice</span>\n          </span>\n        </NavLink>\n        <div className=\"max-h-96 overflow-y-scroll\">\n          {invoiceListItems.map((invoice) => (\n            <NavLink\n              key={invoice.id}\n              to={invoice.id}\n              prefetch=\"intent\"\n              className={({ isActive }) =>\n                \"block border-b border-gray-50 py-3 px-4 hover:bg-gray-50\" +\n                \" \" +\n                (isActive ? \"bg-gray-50\" : \"\")\n              }\n            >\n              <div className=\"flex justify-between text-[length:14px] font-bold leading-6\">\n                <div>{invoice.name}</div>\n                <div>{currencyFormatter.format(invoice.totalAmount)}</div>\n              </div>\n              <div className=\"flex justify-between text-[length:12px] font-medium leading-4 text-gray-400\">\n                <div>{invoice.number}</div>\n                <div\n                  className={\n                    \"uppercase\" +\n                    \" \" +\n                    (invoice.dueStatus === \"paid\"\n                      ? \"text-green-brand\"\n                      : invoice.dueStatus === \"overdue\"\n                      ? \"text-red-brand\"\n                      : \"\")\n                  }\n                >\n                  {invoice.dueStatusDisplay}\n                </div>\n              </div>\n            </NavLink>\n          ))}\n        </div>\n      </div>\n      <div className=\"w-1/2\">{children}</div>\n    </div>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;ACAA;AAMA,qBAAoC;AAEpC,qBAA4B;AAgCb,yBAAyB;AACtC,QAAM,OAAO;AACb,QAAM,QAAQ,KAAK,gBAAgB,KAAK;AACxC,QAAM,iBAAiB,KAAK,MAAO,KAAK,gBAAgB,QAAS;AACjE,SACE,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,cAAD;AAAA,IAAc,OAAM;AAAA,IAAU,QAAQ,KAAK;AAAA,MAC3C,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,MACf,oCAAC,OAAD;AAAA,IACE,WAAU;AAAA,IACV,OAAO,EAAE,OAAO,GAAG;AAAA,OAGvB,oCAAC,cAAD;AAAA,IAAc,OAAM;AAAA,IAAW,QAAQ,KAAK;AAAA,IAAe,OAAK;AAAA,OAElE,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,MACf,oCAAC,WAAD,MAAW,iBACX,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,MACf,oCAAC,aAAD,MACE,oCAAC,QAAD;AAAA;AAMR,sBAAsB;AAAA,EACpB;AAAA,EACA;AAAA,EACA;AAAA,GAKC;AACD,SACE,oCAAC,OAAD;AAAA,IAAK,WAAW,QAAQ,eAAe;AAAA,KACrC,oCAAC,WAAD,MAAY,QACZ,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACZ,kBAAkB,OAAO;AAAA;AAMlC,qBAAqB,EAAE,YAA2C;AAChE,QAAM,EAAE,qBAAqB;AAC7B,SACE,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,SAAD;AAAA,IACE,IAAG;AAAA,IACH,UAAS;AAAA,IACT,WAAW,CAAC,EAAE,eACZ,iEAEC,YAAW,eAAe;AAAA,KAG7B,oCAAC,QAAD;AAAA,IAAM,WAAU;AAAA,KACd,oCAAC,cAAD,OAAgB,KAAC,oCAAC,QAAD,MAAM,yBAG3B,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACZ,iBAAiB,IAAI,CAAC,YACrB,oCAAC,SAAD;AAAA,IACE,KAAK,QAAQ;AAAA,IACb,IAAI,QAAQ;AAAA,IACZ,UAAS;AAAA,IACT,WAAW,CAAC,EAAE,eACZ,8DAEC,YAAW,eAAe;AAAA,KAG7B,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,OAAD,MAAM,QAAQ,OACd,oCAAC,OAAD,MAAM,kBAAkB,OAAO,QAAQ,gBAEzC,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,OAAD,MAAM,QAAQ,SACd,oCAAC,OAAD;AAAA,IACE,WACE,eAEC,SAAQ,cAAc,SACnB,qBACA,QAAQ,cAAc,YACtB,mBACA;AAAA,KAGL,QAAQ,wBAOrB,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KAAS;AAAA;",
  "names": []
}
